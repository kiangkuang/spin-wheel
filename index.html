<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spin Wheel</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/spin-wheel@4.3.1/dist/spin-wheel-iife.js"></script>
    <script type="module" src="js/wheel.js"></script>
    <link rel="stylesheet" href="css/styles.css" />
  </head>

  <body class="m-0 p-0 page-background" onclick="fullscreen()">
    <a
      class="position-fixed bottom-0 start-0 m-3 btn btn-light config-button"
      onclick="event.stopPropagation()"
      id="configBtn"
      >⚙️</a
    >

    <div
      class="d-flex justify-content-center align-items-center flex-column content-container"
    >
      <div
        class="d-flex justify-content-center align-items-center logo-container"
      >
        <img src="spinwin.png" alt="Spin & Win" class="img-fluid" />
      </div>
      <div
        class="position-relative d-flex justify-content-center align-items-center"
      >
        <div class="wheel-container rounded-circle" onclick="spin()"></div>

        <div class="wheel-arrow position-absolute top-0"></div>

        <div
          class="wheel-toast toast position-absolute text-center"
          onclick="toast.hide()"
        ></div>
      </div>
    </div>

    <script type="module">
      import { initWheel } from "./js/wheel.js";
      import { requestFullscreen } from "./js/browserUtils.js";

      const { spin } = initWheel();

      // Set up global functions
      window.spin = spin;
      window.fullscreen = () => requestFullscreen(document.documentElement);

      function getConfigUrl() {
        const params = new URLSearchParams(window.location.search).toString();
        return params ? `config.html?${params}` : "config.html";
      }

      const configBtn = document.getElementById("configBtn");
      configBtn.href = getConfigUrl();

      document.addEventListener("fullscreenchange", () => {
        configBtn.style.display = document.fullscreenElement ? "none" : "block";
      });
    </script>
  </body>
</html>
